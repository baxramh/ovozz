<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ovzli habar ‚Üí Matin | So‚Äòzli xabar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, -apple-system, sans-serif;
        }
        body {
            background: linear-gradient(145deg, #f0f2f5 0%, #e0e5ec 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .card {
            max-width: 800px;
            width: 100%;
            background: #f8faff;
            border-radius: 42px;
            box-shadow: 20px 20px 40px rgba(0,0,0,0.1), -20px -20px 40px rgba(255,255,255,0.7);
            padding: 40px 35px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.5);
            backdrop-filter: blur(2px);
        }
        h1 {
            font-size: 2.2rem;
            font-weight: 600;
            color: #1a2639;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            border-bottom: 3px dashed #9aa9c0;
            padding-bottom: 18px;
        }
        h1 span {
            background: #2d3b57;
            color: white;
            font-size: 1.4rem;
            padding: 8px 16px;
            border-radius: 60px;
            letter-spacing: 1px;
            box-shadow: inset 0 -3px 0 #0f1a2f;
        }
        .sub {
            color: #3a4a66;
            margin-bottom: 32px;
            font-size: 1.1rem;
            font-weight: 400;
            padding-left: 12px;
            border-left: 6px solid #5f7daf;
            background: rgba(95, 125, 175, 0.08);
            border-radius: 0 12px 12px 0;
            line-height: 1.5;
        }
        .textarea-container {
            position: relative;
            margin-bottom: 28px;
        }
        textarea {
            width: 100%;
            height: 170px;
            padding: 25px 25px 20px 25px;
            font-size: 1.2rem;
            line-height: 1.6;
            background: #eef2f9;
            border: none;
            border-radius: 32px;
            box-shadow: inset 8px 8px 16px #c8cdd6, inset -8px -8px 16px #ffffff;
            color: #0d1b2b;
            resize: vertical;
            transition: box-shadow 0.2s, background 0.2s;
            font-weight: 450;
            outline: none;
            border: 2px solid transparent;
        }
        textarea:focus {
            box-shadow: inset 6px 6px 12px #b5bcc9, inset -6px -6px 12px #ffffff, 0 0 0 3px #a0b5da;
            background: #f0f5ff;
        }
        .char-hint {
            position: absolute;
            bottom: 12px;
            right: 25px;
            background: rgba(45, 59, 87, 0.2);
            backdrop-filter: blur(4px);
            padding: 4px 14px;
            border-radius: 40px;
            font-size: 0.9rem;
            color: #1f2b3f;
            font-weight: 500;
            letter-spacing: 0.3px;
            border: 1px solid rgba(255,255,255,0.5);
        }
        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            margin: 30px 0 30px;
            justify-content: center;
        }
        .btn {
            border: none;
            background: #e6ecf5;
            padding: 18px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 60px;
            color: #1e2b41;
            box-shadow: 9px 9px 18px #b0b8c5, -9px -9px 18px #ffffff;
            cursor: pointer;
            transition: 0.15s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            min-width: 190px;
            flex: 1 1 auto;
            border: 1px solid rgba(255,255,255,0.7);
        }
        .btn-primary {
            background: #2d3f60;
            color: white;
            box-shadow: 9px 9px 18px #a1aabe, -9px -9px 18px #ffffff;
        }
        .btn-primary:hover {
            background: #1f2e4a;
            box-shadow: 5px 5px 12px #959eaf, -5px -5px 12px #ffffff;
            transform: scale(0.98);
        }
        .btn:hover {
            background: #d9e2f0;
            box-shadow: 5px 5px 12px #959eaf, -5px -5px 12px #ffffff;
            transform: scale(0.98);
        }
        .btn-primary:hover {
            background: #1f2e4a;
        }
        .output-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 14px;
            margin-top: 15px;
        }
        .output-header h2 {
            font-size: 1.8rem;
            font-weight: 500;
            color: #1b253b;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .output-header h2 i {
            font-size: 2rem;
            font-style: normal;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.1));
        }
        .chip {
            background: #27334b;
            color: white;
            padding: 7px 22px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 400;
            letter-spacing: 0.5px;
            box-shadow: inset 0 -2px 0 #0b1422;
        }
        .message-box {
            background: #eef2f5;
            border-radius: 38px;
            padding: 28px 30px;
            box-shadow: inset 6px 6px 12px #cbd1db, inset -8px -8px 16px #ffffff;
            min-height: 140px;
            font-size: 1.3rem;
            line-height: 1.7;
            color: #102331;
            word-break: break-word;
            white-space: pre-wrap;
            border: 2px solid rgba(255,255,255,0.6);
            transition: background 0.2s;
            margin-bottom: 10px;
            font-weight: 450;
        }
        .message-box:empty::before {
            content: "üì≠ Matin hali yo‚Äòq. Yuqoridagi maydonga habar yozib ¬´Matin qil¬ªni bosing.";
            color: #6c7c9b;
            font-style: italic;
            font-size: 1.1rem;
        }
        .status-note {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            color: #38507c;
            background: rgba(80, 120, 190, 0.1);
            border-radius: 60px;
            padding: 10px 20px;
            margin-top: 18px;
            border: 1px dashed #7d93b9;
        }
        .footer-copy {
            text-align: center;
            margin-top: 30px;
            color: #3f4d69;
            font-size: 0.95rem;
            font-weight: 400;
            opacity: 0.75;
        }
        .btn-copy {
            background: #cdd9ed;
            padding: 10px 22px;
            font-size: 1rem;
            border-radius: 40px;
            border: none;
            box-shadow: 5px 5px 10px #b3bcca, -5px -5px 10px #ffffff;
            cursor: pointer;
            transition: all 0.1s;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-copy:hover {
            background: #bcccdf;
            transform: scale(0.96);
        }
        .row-flex {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
        }
    </style>
</head>
<body>
    <div class="card" role="main">
        <h1>
            <span>üì® Ovzli habar</span> 
            ‚Üí Matin
        </h1>
        <div class="sub">
            ‚úçÔ∏è Istalgan matnli xabarni kiriting ‚Äî ‚ÄúMatin qil‚Äù tugmasi uni to‚Äòliq matn shaklida qabul qiladi.
        </div>

        <!-- KIRITISH MAYONI -->
        <div class="textarea-container">
            <textarea id="inputMessage" placeholder="Misol: Salom, ishlar qalay? Uchrashamizmi?" aria-label="Ovzli habar matni">Assalomu alaykum! Bu sinov xabari. O‚Äòzbekcha matn to‚Äòliq saqlanadi.</textarea>
            <div class="char-hint" id="charCount">34 belgi</div>
        </div>

        <!-- TUGMALAR -->
        <div class="actions">
            <button class="btn" id="clearBtn" title="Maydonni tozalash">
                <span>üóëÔ∏è</span> Tozalash
            </button>
            <button class="btn btn-primary" id="convertBtn" title="Habar matnini qabul qilish">
                <span>üì•</span> Matin qil
            </button>
        </div>

        <!-- NATIJA (MATIN) QUTISI -->
        <div class="output-header">
            <h2>
                <i>üìÑ</i> Matin (natija)
            </h2>
            <div class="chip" id="wordCount">0 so‚Äòz</div>
        </div>
        <div class="message-box" id="outputMessage" aria-live="polite"></div>

        <!-- QO‚ÄòSHIMCHA AMALLAR -->
        <div class="row-flex">
            <div class="status-note">
                <span>‚úÖ</span> Ovzli habar ‚Äî matin ko‚Äòrinishida qabul qilindi
            </div>
            <button class="btn-copy" id="copyBtn" title="Matinni nusxalash">
                <span>üìã</span> Nusxalash
            </button>
        </div>

        <div class="footer-copy">
            ‚ö° Har qanday ovzli (so‚Äòzli) xabar oddiy matnga aylanadi. Yangi xabarni darhol ko‚Äòrasiz.
        </div>
    </div>

    <script>
        (function() {
            const textarea = document.getElementById('inputMessage');
            const outputDiv = document.getElementById('outputMessage');
            const charSpan = document.getElementById('charCount');
            const wordSpan = document.getElementById('wordCount');
            const convertBtn = document.getElementById('convertBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');

            // --- yordamchi funksiyalar: so‚Äòz va belgi hisoblash ---
            function countWords(str) {
                return str.trim() === '' ? 0 : str.trim().split(/\s+/).length;
            }

            function updateCounters() {
                const txt = textarea.value;
                const chars = txt.length;
                charSpan.textContent = chars + ' belgi';

                // matin (output) so‚Äòzlarini ham chiroyli ko‚Äòrsatamiz
                const outputText = outputDiv.innerText;
                const wCount = outputText.trim() === '' ? 0 : outputText.trim().split(/\s+/).length;
                wordSpan.textContent = wCount + ' so‚Äòz';
            }

            // --- asosiy konvertatsiya: textarea qiymatini outputga ko‚Äòchirish ---
            function convertToMatin() {
                let rawText = textarea.value;

                // Agar bo‚Äòsh bo‚Äòlsa, foydalanuvchiga eslatma qoldiramiz, lekin bo‚Äòsh matn ham qabul qilinadi (mantiqan to‚Äòg‚Äòri)
                // Lekin "matin" bo‚Äòsh bo‚Äòlsa ham ko‚Äòrsatamiz, div:empty stillari ishlaydi
                outputDiv.innerText = rawText;  // oddiy matn qilib qo‚Äòyadi (barcha formatlarsiz)
                // Qo‚Äòshimcha: Ixtiyoriy ravishda kirishdagi satr uzilishlari saqlanadi ‚Äî innerText va textContent o‚Äòxshash

                // So‚Äòz va belgilarni yangilash
                updateCounters();

                // Agar xohlasak, ozgina jonlantirish (fokus effekti)
                outputDiv.style.transition = 'background 0.2s';
                outputDiv.style.background = '#f0f7ff';
                setTimeout(() => {
                    outputDiv.style.background = '';  // asliga qaytadi (CSS dagi #eef2f5)
                }, 180);
            }

            // --- tozalash funksiyasi ---
            function clearAll() {
                textarea.value = '';
                outputDiv.innerText = '';   // bo‚Äòsh matn
                updateCounters();
                textarea.focus();
            }

            // --- nusxalash (copy) faqat output matnini ---
            function copyOutput() {
                const textToCopy = outputDiv.innerText;
                if (!textToCopy || textToCopy.trim() === '') {
                    alert('Matin bo‚Äòsh, nusxalash uchun avval xabar kiriting.');
                    return;
                }

                // Zamonaviy clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        // muvaffaqiyatli
                        const originalText = copyBtn.innerHTML;
                        copyBtn.innerHTML = '<span>‚úÖ</span> Nusxalandi';
                        setTimeout(() => {
                            copyBtn.innerHTML = '<span>üìã</span> Nusxalash';
                        }, 1300);
                    }).catch(() => {
                        alert('Nusxalash amalga oshmadi, qo‚Äòlda belgilab oling.');
                    });
                } else {
                    // fallback
                    try {
                        const textArea = document.createElement('textarea');
                        textArea.value = textToCopy;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        const originalText = copyBtn.innerHTML;
                        copyBtn.innerHTML = '<span>‚úÖ</span> Nusxalandi';
                        setTimeout(() => {
                            copyBtn.innerHTML = '<span>üìã</span> Nusxalash';
                        }, 1300);
                    } catch (err) {
                        alert('Nusxalash imkonsiz, matnni belgilab oling.');
                    }
                }
            }

            // ---- voqealar (event listeners) ----
            convertBtn.addEventListener('click', function(e) {
                e.preventDefault();
                convertToMatin();
            });

            clearBtn.addEventListener('click', function(e) {
                e.preventDefault();
                clearAll();
            });

            copyBtn.addEventListener('click', function(e) {
                e.preventDefault();
                copyOutput();
            });

            // Texnik: Har bir kiritishda belgi sonini yangilash, shuningdek so‚Äòzlar hisobi (ixtiyoriy)
            textarea.addEventListener('input', function() {
                const chars = textarea.value.length;
                charSpan.textContent = chars + ' belgi';
                // istasak outputga avtomatik ko‚Äòchirilmasin, faqat tugma bosilganda. 
                // Ammo agar hohlasak realtime, lekin talab: "yuborsam menga matin qilib beradigan" -> tugma orqali qilish ma'qul.
                // Biz faqat hisoblagichni yangilaymiz.
            });

            // Agar dastlabki namuna bo‚Äòlsa, uni outputga ham joylaymiz (sahifa yuklanganda)
            window.addEventListener('load', function() {
                // Dastlabki matnni (textarea ichida bor) "matin" qilish shart emas, lekin foydalanuvchi ko‚Äòrishi uchun namuna sifatida output bo‚Äòsh.
                // lekin xohlasak yuklanganda avtomatik chiroy bo‚Äòladi: avtomatik convert qilmasdan, faqat hisoblagichlarni yangilaymiz.
                // Agar istagan bo‚Äòlsangiz yuklanganda ham matinni chiqarish: 
                // convertToMatin();  // agar xohlasangiz ushbu qatorni faollashtiring
                // Men faollashtirmayman, chunki foydalanuvchi ¬´Matin qil¬ª tugmasini bosishi kerak.
                // Lekin ishlatish qulay bo‚Äòlishi uchun outputDiv da "bo‚Äòsh" degan xabar chiqadi ‚Äî yaxshi.
                updateCounters(); // boshlang‚Äòich holat: output bo‚Äòsh, wordCount 0 bo‚Äòladi
            });

            // qo‚Äòshimcha: agar foydalanuvchi enter tugmasi bilan tezlashtirish (ixtiyoriy)
            textarea.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    convertToMatin();
                }
            });

            // hover va boshqa effektlar uchun hech qanday maxsus narsa kerak emas.

            // agar outputni o‚Äòchirish uchun konvertatsiya bo‚Äòlsa, updateCounters convert ichida chaqirilgan.

            // So‚Äòzlar va belgilar output o‚Äòzgarganda ham yangilanishi kerak. 
            // Masalan nusxalash hech narsani o‚Äòzgartirmaydi. Clear va convert ishlaydi.

            // QO‚ÄòSHIMCHA: outputDiv ichidagi o‚Äòzgarishlarni kuzatish uchun MutationObserver ishlatsa bo‚Äòladi, lekin convert va clear dan keyin updateCounters ishlayapti, shu yetarli.
            // Agar boshqa yerda o‚Äòzgarish bo‚Äòlsa (masalan, user tomonidan), yo‚Äòq.

            // Yana bir kichik qulaylik: Tozalash tugmasi outputni ham tozalaydi, matin qilganda output yoziladi.
        })();
    </script>
</body>
</html>
